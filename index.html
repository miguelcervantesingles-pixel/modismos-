<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memorama de Modismos Â· American English</title>
<link href="https://fonts.googleapis.com/css2?family=Righteous&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0f0e17;
  --surface: #1a1a2e;
  --card-back: #16213e;
  --text: #fffffe;
  --sub: #a7a9be;

  /* Zone colors */
  --home:   #f7971e;
  --work:   #4ecdc4;
  --school: #a78bfa;
  --person: #f06292;
  --street: #81c784;

  --radius: 18px;
  --flip-duration: 0.55s;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Quicksand', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* â”€â”€ PARTICLES BG â”€â”€ */
#particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
.particle {
  position: absolute;
  border-radius: 50%;
  opacity: 0.07;
  animation: drift linear infinite;
}
@keyframes drift {
  from { transform: translateY(110vh) scale(0.6); opacity: 0; }
  10%  { opacity: 0.07; }
  90%  { opacity: 0.07; }
  to   { transform: translateY(-10vh) scale(1.2); opacity: 0; }
}

/* â”€â”€ APP SHELL â”€â”€ */
#app { position: relative; z-index: 1; max-width: 1100px; margin: 0 auto; padding: 0 16px 80px; }

/* â”€â”€ HEADER â”€â”€ */
header {
  text-align: center;
  padding: 36px 0 28px;
}
header h1 {
  font-family: 'Righteous', cursive;
  font-size: clamp(2rem, 6vw, 3.4rem);
  letter-spacing: -1px;
  background: linear-gradient(120deg, #f7971e, #f06292, #a78bfa, #4ecdc4);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
header p { color: var(--sub); font-size: 1rem; font-weight: 600; }

/* â”€â”€ ZONE CAROUSEL â”€â”€ */
.zone-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 28px;
  flex-wrap: wrap;
}
.zone-arrow {
  background: rgba(255,255,255,0.08);
  border: none;
  color: #fff;
  width: 44px; height: 44px;
  border-radius: 50%;
  font-size: 1.3rem;
  cursor: pointer;
  transition: background 0.2s, transform 0.15s;
  flex-shrink: 0;
}
.zone-arrow:hover { background: rgba(255,255,255,0.18); transform: scale(1.1); }
.zone-tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}
.zone-tab {
  padding: 9px 20px;
  border-radius: 50px;
  border: 2px solid transparent;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  font-size: 0.85rem;
  cursor: pointer;
  background: rgba(255,255,255,0.06);
  color: var(--sub);
  transition: all 0.25s;
}
.zone-tab:hover { color: #fff; background: rgba(255,255,255,0.12); }
.zone-tab.active { color: #fff; }
.zone-tab[data-zone="home"].active   { background: var(--home);   border-color: var(--home); }
.zone-tab[data-zone="work"].active   { background: var(--work);   border-color: var(--work);   color: #0f0e17; }
.zone-tab[data-zone="school"].active { background: var(--school); border-color: var(--school); }
.zone-tab[data-zone="person"].active { background: var(--person); border-color: var(--person); }
.zone-tab[data-zone="street"].active { background: var(--street); border-color: var(--street); color: #0f0e17; }

/* â”€â”€ ZONE HEADER â”€â”€ */
.zone-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 22px;
  padding: 16px 22px;
  border-radius: var(--radius);
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  animation: fadeUp 0.4s ease;
}
@keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:none} }
.zone-header-left { display: flex; align-items: center; gap: 14px; }
.zone-icon { font-size: 2.2rem; }
.zone-title { font-family: 'Righteous', cursive; font-size: 1.5rem; }
.zone-stats { color: var(--sub); font-size: 0.85rem; font-weight: 600; }
.zone-badge {
  font-size: 0.78rem;
  font-weight: 700;
  padding: 5px 14px;
  border-radius: 50px;
  letter-spacing: 0.5px;
}

/* â”€â”€ CONTROLS â”€â”€ */
.controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 22px;
  align-items: center;
}
.btn {
  padding: 10px 22px;
  border-radius: 50px;
  border: none;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  font-size: 0.88rem;
  cursor: pointer;
  transition: transform 0.15s, opacity 0.2s;
}
.btn:hover { transform: translateY(-2px); }
.btn-shuffle { background: rgba(255,255,255,0.1); color: #fff; }
.btn-reset { background: rgba(255,255,255,0.06); color: var(--sub); }
.round-select {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 50px;
  color: #fff;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  font-size: 0.85rem;
  padding: 9px 16px;
  cursor: pointer;
}
.round-select option { background: #1a1a2e; }
.score-display {
  margin-left: auto;
  font-weight: 700;
  font-size: 0.9rem;
  color: var(--sub);
}
.score-display span { color: #fff; font-size: 1.1rem; }

/* â”€â”€ CARD GRID â”€â”€ */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 14px;
  animation: fadeUp 0.4s ease;
}

/* â”€â”€ MEMORY CARD â”€â”€ */
.mem-card {
  aspect-ratio: 3/4;
  perspective: 900px;
  cursor: pointer;
  user-select: none;
}
.mem-card-inner {
  position: relative;
  width: 100%; height: 100%;
  transform-style: preserve-3d;
  transition: transform var(--flip-duration) cubic-bezier(.4,0,.2,1);
  border-radius: var(--radius);
}
.mem-card.flipped .mem-card-inner { transform: rotateY(180deg); }
.mem-card.matched .mem-card-inner { transform: rotateY(180deg); }

.card-face {
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px 10px;
  text-align: center;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}
.card-back-face {
  background: var(--card-back);
  border: 2px solid rgba(255,255,255,0.06);
  box-shadow: 0 4px 18px rgba(0,0,0,0.4);
}
.card-back-face .card-logo {
  font-family: 'Righteous', cursive;
  font-size: 1rem;
  color: rgba(255,255,255,0.2);
  margin-top: 8px;
}
.card-back-face::before {
  content: '';
  width: 60px; height: 60px;
  border-radius: 50%;
  background: rgba(255,255,255,0.04);
  border: 2px solid rgba(255,255,255,0.07);
  margin-bottom: 8px;
}
.card-back-face .back-emoji {
  font-size: 1.8rem;
  position: absolute;
}

.card-front-face {
  transform: rotateY(180deg);
  border: 2px solid transparent;
  box-shadow: 0 6px 24px rgba(0,0,0,0.5);
  gap: 8px;
  transition: box-shadow 0.3s;
}
/* English card */
.card-front-face.type-en {
  background: linear-gradient(145deg, #1e2a4a, #16213e);
}
/* Spanish card */
.card-front-face.type-es {
  background: linear-gradient(145deg, #2a1e3a, #1e1628);
}

.card-emoji { font-size: 2rem; line-height: 1; }
.card-type-label {
  font-size: 0.6rem;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  opacity: 0.5;
}
.card-text {
  font-size: 0.82rem;
  font-weight: 700;
  line-height: 1.4;
  color: #fff;
}

/* Matched state */
.mem-card.matched .card-front-face {
  border-color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.35);
}
.mem-card.matched .card-front-face::after {
  content: 'âœ“';
  position: absolute;
  top: 8px; right: 10px;
  font-size: 0.8rem;
  color: #4ade80;
  font-weight: 900;
}

/* Zone color accents on english cards */
[data-active-zone="home"]   .card-front-face.type-en { border-color: var(--home); }
[data-active-zone="work"]   .card-front-face.type-en { border-color: var(--work); }
[data-active-zone="school"] .card-front-face.type-en { border-color: var(--school); }
[data-active-zone="person"] .card-front-face.type-en { border-color: var(--person); }
[data-active-zone="street"] .card-front-face.type-en { border-color: var(--street); }

/* â”€â”€ SUCCESS MODAL â”€â”€ */
.modal-overlay {
  display: none;
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.75);
  z-index: 100;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px);
}
.modal-overlay.show { display: flex; }
.modal {
  background: var(--surface);
  border-radius: 24px;
  padding: 40px 36px;
  text-align: center;
  max-width: 420px;
  width: 90%;
  border: 1px solid rgba(255,255,255,0.1);
  animation: popIn 0.4s cubic-bezier(.34,1.56,.64,1);
  box-shadow: 0 24px 60px rgba(0,0,0,0.6);
}
@keyframes popIn { from{opacity:0;transform:scale(.7)} to{opacity:1;transform:scale(1)} }
.modal-emoji { font-size: 4rem; margin-bottom: 12px; }
.modal h2 { font-family: 'Righteous', cursive; font-size: 1.8rem; margin-bottom: 8px; }
.modal p { color: var(--sub); margin-bottom: 6px; font-size: 0.95rem; }
.modal-example {
  background: rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 14px 18px;
  margin: 16px 0;
  font-size: 0.9rem;
  color: #fff;
  line-height: 1.6;
  text-align: left;
  border-left: 3px solid;
}
.modal-btns { display: flex; gap: 10px; justify-content: center; margin-top: 20px; flex-wrap: wrap; }
.modal-btn {
  padding: 12px 28px;
  border-radius: 50px;
  border: none;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.95rem;
  transition: transform 0.15s;
}
.modal-btn:hover { transform: translateY(-2px); }
.modal-btn-primary { background: #4ade80; color: #0f0e17; }
.modal-btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }

/* â”€â”€ ZONE COMPLETE MODAL â”€â”€ */
.zone-complete {
  display: none;
  position: fixed; inset: 0;
  z-index: 200;
  background: rgba(0,0,0,0.85);
  align-items: center; justify-content: center;
  backdrop-filter: blur(10px);
}
.zone-complete.show { display: flex; }
.zone-complete-box {
  background: var(--surface);
  border-radius: 28px;
  padding: 48px 40px;
  text-align: center;
  max-width: 460px;
  width: 90%;
  border: 1px solid rgba(255,255,255,0.12);
  animation: popIn 0.5s cubic-bezier(.34,1.56,.64,1);
}
.zone-complete-box h2 { font-family: 'Righteous', cursive; font-size: 2.2rem; margin: 16px 0 8px; }
.zone-complete-box p { color: var(--sub); margin-bottom: 20px; }
.confetti-emoji { font-size: 5rem; }

/* â”€â”€ PROGRESS RING â”€â”€ */
.progress-wrap { display: flex; align-items: center; gap: 10px; }
.progress-ring { --r: 20; }
</style>
</head>
<body>

<div id="particles"></div>

<div id="app" data-active-zone="home">
  <header>
    <h1>ğŸƒ Memorama de Modismos</h1>
    <p>American English Idioms Â· Practica por Ã¡rea temÃ¡tica</p>
  </header>

  <!-- ZONE CAROUSEL -->
  <div class="zone-nav">
    <button class="zone-arrow" id="prevZone">&#8592;</button>
    <div class="zone-tabs" id="zoneTabs"></div>
    <button class="zone-arrow" id="nextZone">&#8594;</button>
  </div>

  <!-- ZONE HEADER -->
  <div class="zone-header" id="zoneHeader"></div>

  <!-- CONTROLS -->
  <div class="controls">
    <button class="btn btn-shuffle" onclick="shuffleAndRender()">ğŸ”€ Mezclar</button>
    <button class="btn btn-reset" onclick="resetZone()">â†º Reiniciar</button>
    <label style="color:var(--sub);font-size:.85rem;font-weight:700">Ronda:
      <select class="round-select" id="roundSelect" onchange="changeRound()">
        <option value="0">1â€“10</option>
        <option value="1">11â€“20</option>
        <option value="2">21â€“30</option>
      </select>
    </label>
    <div class="score-display">Pares: <span id="scoreDisplay">0</span> / <span id="totalDisplay">10</span></div>
  </div>

  <!-- GRID -->
  <div class="card-grid" id="cardGrid"></div>
</div>

<!-- MATCH MODAL -->
<div class="modal-overlay" id="matchModal">
  <div class="modal">
    <div class="modal-emoji" id="modalEmoji"></div>
    <h2>Â¡Par encontrado! ğŸ‰</h2>
    <p id="modalIdiom" style="font-size:1rem;font-weight:700;color:#fff;margin:4px 0"></p>
    <p id="modalTranslation" style="font-size:.9rem"></p>
    <div class="modal-example" id="modalExample"></div>
    <div class="modal-btns">
      <button class="modal-btn modal-btn-primary" onclick="closeMatchModal()">Â¡Siguiente! â–¶</button>
    </div>
  </div>
</div>

<!-- ZONE COMPLETE -->
<div class="zone-complete" id="zoneComplete">
  <div class="zone-complete-box">
    <div class="confetti-emoji">ğŸŠ</div>
    <h2 id="zcTitle">Â¡Zona completada!</h2>
    <p id="zcMsg"></p>
    <div class="modal-btns">
      <button class="modal-btn modal-btn-primary" onclick="nextZoneAuto()">Siguiente zona â–¶</button>
      <button class="modal-btn modal-btn-secondary" onclick="closeZoneComplete()">Seguir aquÃ­</button>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA â€” 5 zonas Ã— 30 modismos
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ZONES = [
  {
    id: "home", label: "En el Hogar", icon: "ğŸ ", color: "#f7971e",
    idioms: [
      { en:"Hit the sack",          es:"Irse a dormir",               emoji:"ğŸ˜´", ex:"I'm exhausted â€” I'm gonna hit the sack early tonight." },
      { en:"Under the weather",     es:"Sentirse mal / enfermo",      emoji:"ğŸ¤§", ex:"She didn't come to dinner; she's feeling under the weather." },
      { en:"Bite the bullet",       es:"Aguantarse / armarse de valor",emoji:"ğŸ’ª", ex:"Just bite the bullet and call the plumber already." },
      { en:"In hot water",          es:"En problemas",                emoji:"ğŸ”¥", ex:"He's in hot water with his wife for forgetting their anniversary." },
      { en:"Spill the beans",       es:"Revelar un secreto",          emoji:"ğŸ«˜", ex:"Who spilled the beans about the surprise party?" },
      { en:"Hit the roof",          es:"Ponerse furioso",             emoji:"ğŸ˜¤", ex:"Mom hit the roof when she saw the broken window." },
      { en:"Turn a blind eye",      es:"Hacer la vista gorda",        emoji:"ğŸ‘ï¸", ex:"Dad turned a blind eye to the mess in the garage." },
      { en:"Burn the midnight oil", es:"Trasnochar trabajando",       emoji:"ğŸ•¯ï¸", ex:"She burned the midnight oil to finish the project." },
      { en:"Couch potato",          es:"Persona sedentaria / floja",  emoji:"ğŸ¥”", ex:"Stop being a couch potato and go for a walk!" },
      { en:"Drive someone up the wall",es:"Sacar de quicio",         emoji:"ğŸ§±", ex:"The kids' noise is driving me up the wall." },
      { en:"In the same boat",      es:"En la misma situaciÃ³n",       emoji:"ğŸš£", ex:"We're all in the same boat â€” the power's out for everyone." },
      { en:"Let the cat out of the bag",es:"Revelar accidentalmente", emoji:"ğŸ±", ex:"He let the cat out of the bag about the divorce." },
      { en:"Once in a blue moon",   es:"Muy de vez en cuando",        emoji:"ğŸŒ™", ex:"We only eat takeout once in a blue moon." },
      { en:"Piece of cake",         es:"Pan comido / muy fÃ¡cil",      emoji:"ğŸ‚", ex:"Fixing that shelf was a piece of cake." },
      { en:"Pull someone's leg",    es:"Tomarle el pelo a alguien",   emoji:"ğŸ¦µ", ex:"You got a promotion? Are you pulling my leg?" },
      { en:"Sleep on it",           es:"Consultarlo con la almohada", emoji:"ğŸ›ï¸", ex:"Don't decide now â€” sleep on it and tell me tomorrow." },
      { en:"Under one's roof",      es:"Bajo el mismo techo",         emoji:"ğŸ¡", ex:"As long as you live under my roof, you follow my rules." },
      { en:"Clean slate",           es:"BorrÃ³n y cuenta nueva",       emoji:"ğŸ§¹", ex:"After the argument, they decided to start with a clean slate." },
      { en:"Kill two birds with one stone",es:"Matar dos pÃ¡jaros de un tiro",emoji:"ğŸ¦", ex:"I'll drop the kids off and buy groceries â€” kill two birds with one stone." },
      { en:"Bite off more than you can chew",es:"Abarcar mÃ¡s de lo que puedes",emoji:"ğŸ˜¬", ex:"She bit off more than she could chew taking on three projects." },
      { en:"Break the ice",         es:"Romper el hielo",             emoji:"ğŸ§Š", ex:"He told a joke to break the ice at the family reunion." },
      { en:"Lose one's temper",     es:"Perder los estribos",         emoji:"ğŸ˜¡", ex:"Don't lose your temper â€” talk it out calmly." },
      { en:"Get out of hand",       es:"Salirse de control",          emoji:"ğŸŒ€", ex:"The argument got out of hand and they stopped speaking." },
      { en:"Lay down the law",      es:"Imponer las reglas",          emoji:"ğŸ“œ", ex:"Dad laid down the law about phone use at dinner." },
      { en:"Read between the lines",es:"Leer entre lÃ­neas",           emoji:"ğŸ“–", ex:"She didn't say she was upset, but I could read between the lines." },
      { en:"Walk on eggshells",     es:"Andar con pies de plomo",     emoji:"ğŸ¥š", ex:"Everyone walks on eggshells when grandpa is in a bad mood." },
      { en:"Hit the nail on the head",es:"Dar en el clavo",           emoji:"ğŸ”¨", ex:"You hit the nail on the head â€” that's exactly the problem." },
      { en:"Throw in the towel",    es:"Rendirse / darse por vencido",emoji:"ğŸ³ï¸", ex:"After years of fighting, they threw in the towel and divorced." },
      { en:"Cut corners",           es:"Hacer las cosas a medias",    emoji:"âœ‚ï¸", ex:"Don't cut corners on the repairs â€” do it right." },
      { en:"Bite the hand that feeds you",es:"Morder la mano que te da de comer",emoji:"ğŸ¤š", ex:"Insulting your boss is biting the hand that feeds you." },
    ]
  },
  {
    id: "work", label: "Trabajo", icon: "ğŸ’¼", color: "#4ecdc4",
    idioms: [
      { en:"Get the ball rolling",  es:"Poner las cosas en marcha",   emoji:"âš½", ex:"Let's get the ball rolling on the new campaign." },
      { en:"Back to the drawing board",es:"Volver a empezar desde cero",emoji:"ğŸ“", ex:"The client rejected our idea â€” back to the drawing board." },
      { en:"Touch base",            es:"Ponerse en contacto / actualizar",emoji:"ğŸ“", ex:"Let's touch base on Friday to review the numbers." },
      { en:"Think outside the box", es:"Pensar de manera creativa",   emoji:"ğŸ“¦", ex:"We need to think outside the box to solve this." },
      { en:"On the same page",      es:"De acuerdo / alineados",      emoji:"ğŸ“„", ex:"Are we all on the same page about the deadline?" },
      { en:"Pull your weight",      es:"Poner de tu parte / cumplir", emoji:"ğŸ‹ï¸", ex:"Everyone needs to pull their weight on this project." },
      { en:"Cut to the chase",      es:"Ir al grano",                 emoji:"ğŸ¯", ex:"Cut to the chase â€” do we have the budget or not?" },
      { en:"Red tape",              es:"Burocracia / papeleo",        emoji:"ğŸ”´", ex:"There's so much red tape to get a permit here." },
      { en:"Keep the ball rolling", es:"Mantener el ritmo / continuar",emoji:"ğŸ”„", ex:"Good job! Now let's keep the ball rolling." },
      { en:"Up in the air",         es:"Pendiente / sin resolver",    emoji:"â˜ï¸", ex:"The merger is still up in the air." },
      { en:"Bite the bullet",       es:"Hacer algo difÃ­cil sin queja",emoji:"ğŸ¦·", ex:"We have to bite the bullet and lay off some staff." },
      { en:"Burn bridges",          es:"Quemar las naves / cortar lazos",emoji:"ğŸ”¥", ex:"Don't burn bridges when you quit â€” you may need them later." },
      { en:"Step up to the plate",  es:"Estar a la altura / asumir",  emoji:"âš¾", ex:"With the manager gone, someone needs to step up to the plate." },
      { en:"Go the extra mile",     es:"Dar el extra / esforzarse mÃ¡s",emoji:"ğŸƒ", ex:"She always goes the extra mile for her clients." },
      { en:"Hit the ground running",es:"Empezar con todo / arrancar fuerte",emoji:"ğŸš€", ex:"The new hire hit the ground running from day one." },
      { en:"In the loop",           es:"Al tanto / informado",        emoji:"ğŸ”", ex:"Keep me in the loop on any changes." },
      { en:"On the clock",          es:"En horario de trabajo / pagado",emoji:"â°", ex:"No personal calls while you're on the clock." },
      { en:"Take the lead",         es:"Tomar el mando",              emoji:"ğŸ–ï¸", ex:"Who's going to take the lead on this presentation?" },
      { en:"A tall order",          es:"Algo difÃ­cil de lograr",      emoji:"ğŸ“", ex:"Finishing by Friday is a tall order but let's try." },
      { en:"Under the table",       es:"Por lo bajo / ilegalmente",   emoji:"ğŸ¤«", ex:"He was paid under the table â€” no taxes, no record." },
      { en:"Bottom line",           es:"En resumidas cuentas / lo esencial",emoji:"ğŸ“Š", ex:"The bottom line is: we need more sales." },
      { en:"Corner the market",     es:"Dominar el mercado",          emoji:"ğŸ†", ex:"That company has cornered the market on streaming." },
      { en:"Learning curve",        es:"Curva de aprendizaje",        emoji:"ğŸ“ˆ", ex:"There's a steep learning curve with this new software." },
      { en:"Put on the back burner",es:"Dejar para despuÃ©s / posponer",emoji:"ğŸ”¥", ex:"Let's put that idea on the back burner for now." },
      { en:"By the book",           es:"Siguiendo las reglas / al pie de la letra",emoji:"ğŸ“š", ex:"Everything here is done strictly by the book." },
      { en:"Ballpark figure",       es:"Cifra aproximada",            emoji:"ğŸŸï¸", ex:"Give me a ballpark figure for the renovation cost." },
      { en:"Dead end",              es:"CallejÃ³n sin salida",         emoji:"ğŸš«", ex:"This negotiation has hit a dead end." },
      { en:"Raise the bar",         es:"Poner el listÃ³n mÃ¡s alto",    emoji:"ğŸ¥‡", ex:"Her work always raises the bar for the whole team." },
      { en:"Work around the clock", es:"Trabajar sin parar / 24/7",   emoji:"ğŸ•", ex:"They worked around the clock to meet the deadline." },
      { en:"Wear many hats",        es:"Tener muchos roles a la vez", emoji:"ğŸ©", ex:"In a startup, you wear many hats." },
    ]
  },
  {
    id: "school", label: "Escuela", icon: "ğŸ“", color: "#a78bfa",
    idioms: [
      { en:"Hit the books",         es:"Ponerse a estudiar",          emoji:"ğŸ“š", ex:"Finals are next week â€” time to hit the books." },
      { en:"Burn the midnight oil", es:"Estudiar hasta tarde",        emoji:"ğŸ•¯ï¸", ex:"She burned the midnight oil before her chemistry exam." },
      { en:"Pass with flying colors",es:"Aprobar con muy buenas notas",emoji:"ğŸŒˆ", ex:"He passed his bar exam with flying colors." },
      { en:"Learn the ropes",       es:"Aprender lo bÃ¡sico / cÃ³mo funciona",emoji:"ğŸª¢", ex:"It takes a semester to learn the ropes in college." },
      { en:"Teacher's pet",         es:"El consentido/a del profesor", emoji:"ğŸ", ex:"Everyone thinks she's the teacher's pet." },
      { en:"Cut class",             es:"Faltar a clase / hacer novillos",emoji:"âœ‚ï¸", ex:"He got caught cutting class for the third time." },
      { en:"Ace an exam",           es:"Sacar 10 en un examen",       emoji:"ğŸ…", ex:"She aced every test this semester." },
      { en:"Pull an all-nighter",   es:"Quedarse despierto toda la noche estudiando",emoji:"ğŸŒ™", ex:"I had to pull an all-nighter for the history paper." },
      { en:"Behind the times",      es:"Anticuado / fuera de moda",   emoji:"â³", ex:"That textbook is so behind the times." },
      { en:"In over one's head",    es:"Metido en algo que supera tus capacidades",emoji:"ğŸŒŠ", ex:"She took AP Calculus and ended up in over her head." },
      { en:"Get the hang of it",    es:"Agarrarle la onda / entender",emoji:"ğŸ’¡", ex:"It seemed hard, but I'm finally getting the hang of it." },
      { en:"Make the grade",        es:"Dar el nivel / aprobar",      emoji:"ğŸ“", ex:"Not everyone makes the grade in medical school." },
      { en:"School of hard knocks", es:"La escuela de la vida",       emoji:"ğŸ‘Š", ex:"He never went to college; he graduated from the school of hard knocks." },
      { en:"Put your thinking cap on",es:"Ponerse a pensar seriamente",emoji:"ğŸ§¢", ex:"Put your thinking cap on â€” this problem is tricky." },
      { en:"Bite the dust",         es:"Fracasar / no lograrlo",      emoji:"ğŸ’¨", ex:"Three students bit the dust in the first exam." },
      { en:"Not rocket science",    es:"No es nada del otro mundo",   emoji:"ğŸš€", ex:"It's not rocket science â€” you just follow the steps." },
      { en:"Food for thought",      es:"Algo en quÃ© pensar",          emoji:"ğŸ½ï¸", ex:"The professor's question was real food for thought." },
      { en:"On the tip of one's tongue",es:"Tenerlo en la punta de la lengua",emoji:"ğŸ‘…", ex:"The answer is on the tip of my tongue!" },
      { en:"Get a head start",      es:"Llevar ventaja / empezar antes",emoji:"ğŸ", ex:"Start studying now to get a head start on finals." },
      { en:"Wrap one's head around",es:"Entender algo complicado",    emoji:"ğŸ§ ", ex:"I can't wrap my head around quantum physics." },
      { en:"Blank out",             es:"Quedarse en blanco",          emoji:"ğŸ˜¶", ex:"I blanked out completely during the oral exam." },
      { en:"Hit a wall",            es:"Quedarse atascado / bloqueado",emoji:"ğŸ§±", ex:"I hit a wall with my thesis and can't move forward." },
      { en:"Hands down",            es:"Sin lugar a dudas",           emoji:"âœ‹", ex:"That was hands down the hardest test I've taken." },
      { en:"Hit the nail on the head",es:"Acertar de pleno",          emoji:"ğŸ”¨", ex:"Your analysis hit the nail on the head." },
      { en:"Over one's head",       es:"Demasiado difÃ­cil de entender",emoji:"ğŸ’«", ex:"The lecture went completely over my head." },
      { en:"Call it a day",         es:"Terminar por hoy",            emoji:"ğŸ“…", ex:"We studied for 4 hours â€” let's call it a day." },
      { en:"Know something inside out",es:"Conocer algo a fondo",     emoji:"ğŸ”", ex:"She knows that subject inside out." },
      { en:"Pick up where you left off",es:"Continuar desde donde quedaste",emoji:"ğŸ“Œ", ex:"Let's pick up where we left off in Chapter 6." },
      { en:"Fall behind",           es:"Quedarse rezagado",           emoji:"ğŸ¢", ex:"If you miss class, you'll fall behind quickly." },
      { en:"Stay on top of things", es:"Mantenerse al dÃ­a / organizado",emoji:"ğŸ—‚ï¸", ex:"Use a planner to stay on top of your assignments." },
    ]
  },
  {
    id: "person", label: "Personales", icon: "ğŸ’¬", color: "#f06292",
    idioms: [
      { en:"On top of the world",   es:"En la cima / muy feliz",      emoji:"ğŸŒ", ex:"She felt on top of the world after the promotion." },
      { en:"Down in the dumps",     es:"Deprimido / triste",          emoji:"ğŸ˜”", ex:"He's been down in the dumps since the breakup." },
      { en:"Keep one's chin up",    es:"Mantener la cabeza en alto",  emoji:"ğŸ˜¤", ex:"Keep your chin up â€” things will get better." },
      { en:"Wear your heart on your sleeve",es:"Mostrar las emociones abiertamente",emoji:"â¤ï¸", ex:"She wears her heart on her sleeve â€” you always know how she feels." },
      { en:"Bite someone's head off",es:"Responderle de mala manera a alguien",emoji:"ğŸ˜ ", ex:"Don't bite my head off â€” I was just asking!" },
      { en:"Get cold feet",         es:"Arrepentirse / acobardarse",  emoji:"ğŸ¥¶", ex:"He got cold feet right before proposing." },
      { en:"Give someone the cold shoulder",es:"Ignorar a alguien",   emoji:"ğŸ§Š", ex:"She gave him the cold shoulder after their fight." },
      { en:"Spill your guts",       es:"Desahogarse / contarlo todo", emoji:"ğŸ’¬", ex:"After a glass of wine, she spilled her guts about everything." },
      { en:"Bend over backwards",   es:"Hacer todo lo posible / desvivirse",emoji:"ğŸ¤¸", ex:"He bent over backwards to make her feel welcome." },
      { en:"Have a change of heart",es:"Cambiar de opiniÃ³n / de sentimiento",emoji:"ğŸ’“", ex:"She had a change of heart and decided to forgive him." },
      { en:"Take heart",            es:"Animarse / no perder la esperanza",emoji:"ğŸ’—", ex:"Take heart â€” the hardest part is already behind you." },
      { en:"Fly off the handle",    es:"Perder los estribos de repente",emoji:"âœˆï¸", ex:"He flew off the handle when he saw the bill." },
      { en:"Stab someone in the back",es:"Traicionar a alguien",      emoji:"ğŸ”ª", ex:"My best friend stabbed me in the back by telling my secret." },
      { en:"Add fuel to the fire",  es:"Echar leÃ±a al fuego",         emoji:"ğŸ”¥", ex:"Don't add fuel to the fire â€” just let it go." },
      { en:"Have a chip on one's shoulder",es:"Tener un complejo / resentimiento",emoji:"ğŸ˜’", ex:"He still has a chip on his shoulder about not getting the job." },
      { en:"Bury the hatchet",      es:"Hacer las paces",             emoji:"ğŸª“", ex:"They finally buried the hatchet after years of fighting." },
      { en:"Cross one's fingers",   es:"Cruzar los dedos / tener esperanza",emoji:"ğŸ¤", ex:"Cross your fingers â€” I have a big interview today." },
      { en:"Hang in there",         es:"Aguanta / no te rindas",      emoji:"ğŸŒŸ", ex:"Hang in there! The semester is almost over." },
      { en:"Blow off steam",        es:"Desahogarse / relajarse",     emoji:"ğŸ’¨", ex:"She goes running to blow off steam after work." },
      { en:"Swallow one's pride",   es:"Tragarse el orgullo",         emoji:"ğŸ˜¤", ex:"He had to swallow his pride and ask for help." },
      { en:"See eye to eye",        es:"Estar de acuerdo / entenderse",emoji:"ğŸ‘€", ex:"We don't always see eye to eye, but we respect each other." },
      { en:"Drive a hard bargain",  es:"Negociar duro / ser exigente",emoji:"ğŸ¤", ex:"She drives a hard bargain â€” never accept her first offer." },
      { en:"Lose touch",            es:"Perder el contacto",          emoji:"ğŸ“µ", ex:"We lost touch after moving to different cities." },
      { en:"Keep in touch",         es:"Mantenerse en contacto",      emoji:"ğŸ“±", ex:"Let's keep in touch after the trip." },
      { en:"Go with the flow",      es:"Dejarse llevar / adaptarse",  emoji:"ğŸŒŠ", ex:"Stop stressing â€” just go with the flow." },
      { en:"Bite your tongue",      es:"Morderse la lengua / callarse",emoji:"ğŸ‘…", ex:"I had to bite my tongue to not say something rude." },
      { en:"Get on someone's nerves",es:"Poner los nervios de punta", emoji:"ğŸ˜¬", ex:"His constant whistling gets on my nerves." },
      { en:"Have a lot on one's plate",es:"Tener mucho que hacer",    emoji:"ğŸ½ï¸", ex:"I can't volunteer right now â€” I have a lot on my plate." },
      { en:"Speak one's mind",      es:"Decir lo que piensas / hablar claro",emoji:"ğŸ—£ï¸", ex:"Don't be shy â€” just speak your mind." },
      { en:"Get a taste of one's own medicine",es:"Recibir lo que uno merece",emoji:"ğŸ’Š", ex:"He finally got a taste of his own medicine." },
    ]
  },
  {
    id: "street", label: "Coloquial / Calle", icon: "ğŸ—£ï¸", color: "#81c784",
    idioms: [
      { en:"What's up?",            es:"Â¿QuÃ© hay? / Â¿QuÃ© onda?",     emoji:"ğŸ‘‹", ex:"Hey! What's up? Haven't seen you in ages!" },
      { en:"No biggie",             es:"No es gran cosa / sin problema",emoji:"ğŸ˜Œ", ex:"You're late? No biggie â€” we just got here." },
      { en:"Hang out",              es:"Pasar el rato / salir",       emoji:"ğŸ§‘â€ğŸ¤â€ğŸ§‘", ex:"We should hang out this weekend." },
      { en:"Give a heads up",       es:"Avisar de antemano",          emoji:"ğŸ“¢", ex:"Give me a heads up before you come over." },
      { en:"Catch someone's drift", es:"Entender lo que alguien quiere decir",emoji:"ğŸ£", ex:"I'm not saying you're wrong â€” you catch my drift?" },
      { en:"On the fence",          es:"Indeciso / entre dos opciones",emoji:"ğŸš§", ex:"I'm still on the fence about going to the party." },
      { en:"Bent out of shape",     es:"Enojado / molesto",           emoji:"ğŸ˜¤", ex:"Don't get bent out of shape â€” it was just a joke." },
      { en:"Chill out",             es:"Calmarse / relajarse",        emoji:"ğŸ˜", ex:"Chill out! Everything is going to be fine." },
      { en:"Cost an arm and a leg", es:"Costar un ojo de la cara",    emoji:"ğŸ’¸", ex:"That concert ticket cost me an arm and a leg." },
      { en:"A blessing in disguise",es:"Un mal que resulta ser un bien",emoji:"ğŸ™", ex:"Getting fired was a blessing in disguise â€” I found a better job." },
      { en:"Rain on someone's parade",es:"Aguarle la fiesta",         emoji:"ğŸŒ§ï¸", ex:"I hate to rain on your parade, but the trip is canceled." },
      { en:"Break a leg",           es:"Â¡Mucha suerte! (en espectÃ¡culos)",emoji:"ğŸ¦µ", ex:"You've got the show tonight? Break a leg!" },
      { en:"Hit the spot",          es:"Dar en el clavo / satisfacer",emoji:"ğŸ¯", ex:"That cold lemonade really hit the spot." },
      { en:"Throw someone under the bus",es:"Echarle la culpa a alguien / traicionar",emoji:"ğŸšŒ", ex:"He threw me under the bus in front of the boss." },
      { en:"Pull strings",          es:"Usar contactos / palancas",   emoji:"ğŸ»", ex:"His dad pulled strings to get him into the program." },
      { en:"Kick the bucket",       es:"Estirar la pata / morirse",   emoji:"ğŸª£", ex:"The old car finally kicked the bucket." },
      { en:"The whole nine yards",  es:"Todo el rollo / todo lo que hay",emoji:"ğŸ“", ex:"She gave me the whole nine yards about her vacation." },
      { en:"Jump on the bandwagon", es:"Sumarse a una moda / seguir la corriente",emoji:"ğŸº", ex:"Everyone's into yoga now â€” I don't want to jump on the bandwagon." },
      { en:"Pot calling the kettle black",es:"El que tiene tejado de vidrio no tira piedras",emoji:"â˜•", ex:"You're calling me lazy? That's the pot calling the kettle black." },
      { en:"Miss the boat",         es:"Perder la oportunidad",       emoji:"â›µ", ex:"He missed the boat on that investment." },
      { en:"Shoot the breeze",      es:"Charlar / hablar de nada",    emoji:"ğŸ’¨", ex:"We just sat on the porch and shot the breeze for hours." },
      { en:"Get a kick out of",     es:"Divertirle / sacar placer de",emoji:"ğŸ˜‚", ex:"She gets a kick out of watching old cartoons." },
      { en:"Up for grabs",          es:"Disponible para cualquiera",  emoji:"ğŸ¤²", ex:"The last piece of pizza is up for grabs." },
      { en:"Go bananas",            es:"Volverse loco / perder la cabeza",emoji:"ğŸŒ", ex:"The crowd went bananas when the band appeared." },
      { en:"Knock it out of the park",es:"Hacerlo de manera excepcional",emoji:"âš¾", ex:"Her speech knocked it out of the park." },
      { en:"Have a blast",          es:"Pasarla increÃ­ble",           emoji:"ğŸ‰", ex:"We had a blast at the concert last night." },
      { en:"Ditch",                 es:"Plantar / abandonar",         emoji:"ğŸš¶", ex:"She ditched us at the last minute." },
      { en:"Crash",                 es:"Dormir en casa de alguien / desplomarse",emoji:"ğŸ˜ª", ex:"Can I crash at your place tonight?" },
      { en:"Flake out",             es:"Rajar / echarse para atrÃ¡s",  emoji:"â„ï¸", ex:"He flaked out on our plans again â€” so unreliable." },
      { en:"Blow someone's mind",   es:"Dejar a alguien boquiabierto",emoji:"ğŸ¤¯", ex:"That magic trick blew my mind!" },
    ]
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentZoneIdx = 0;
let currentRound   = 0; // 0=1-10, 1=11-20, 2=21-30
let flipped        = [];
let matched        = new Set();
let locked         = false;
let moves          = 0;
let pendingMatchData = null;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PARTICLES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const particlesEl = document.getElementById('particles');
const colors = ['#f7971e','#4ecdc4','#a78bfa','#f06292','#81c784'];
for(let i=0;i<20;i++){
  const d = document.createElement('div');
  d.className='particle';
  const size = 20 + Math.random()*60;
  d.style.cssText=`
    width:${size}px; height:${size}px;
    background:${colors[i%colors.length]};
    left:${Math.random()*100}%;
    animation-duration:${14+Math.random()*18}s;
    animation-delay:${Math.random()*12}s;
  `;
  particlesEl.appendChild(d);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ZONE NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildZoneTabs(){
  const tabs = document.getElementById('zoneTabs');
  tabs.innerHTML = ZONES.map((z,i)=>`
    <button class="zone-tab${i===currentZoneIdx?' active':''}" data-zone="${z.id}" onclick="switchZone(${i})">
      ${z.icon} ${z.label}
    </button>`).join('');
}

function switchZone(idx){
  currentZoneIdx = idx;
  currentRound   = 0;
  document.getElementById('roundSelect').value = '0';
  flipped=[]; matched=new Set(); locked=false; moves=0;
  document.getElementById('app').dataset.activeZone = ZONES[idx].id;
  buildZoneTabs();
  renderZoneHeader();
  renderGrid();
}

document.getElementById('prevZone').onclick = ()=>{
  switchZone((currentZoneIdx - 1 + ZONES.length) % ZONES.length);
};
document.getElementById('nextZone').onclick = ()=>{
  switchZone((currentZoneIdx + 1) % ZONES.length);
};

function renderZoneHeader(){
  const z = ZONES[currentZoneIdx];
  const done = matched.size / 2;
  const total = 10;
  document.getElementById('zoneHeader').innerHTML=`
    <div class="zone-header-left">
      <span class="zone-icon">${z.icon}</span>
      <div>
        <div class="zone-title" style="color:${z.color}">${z.label}</div>
        <div class="zone-stats">Ronda ${currentRound+1}/3 Â· ${done}/${total} pares encontrados</div>
      </div>
    </div>
    <span class="zone-badge" style="background:${z.color}20;color:${z.color};border:1px solid ${z.color}40">
      ${z.idioms.length} modismos
    </span>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GRID
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getSlice(){
  const z = ZONES[currentZoneIdx];
  const start = currentRound * 10;
  return z.idioms.slice(start, start + 10);
}

function shuffleArr(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

let cardData = []; // flat array of card objects

function renderGrid(){
  const slice = getSlice();
  // Build pairs
  const pairs = [];
  slice.forEach((item, idx)=>{
    pairs.push({ id:idx, type:'en', text:item.en, emoji:item.emoji, item });
    pairs.push({ id:idx, type:'es', text:item.es, emoji:item.emoji, item });
  });
  cardData = shuffleArr(pairs);

  flipped=[]; matched=new Set(); locked=false; moves=0;
  updateScore();
  renderZoneHeader();

  const grid = document.getElementById('cardGrid');
  grid.innerHTML = cardData.map((c,i)=>`
    <div class="mem-card" data-idx="${i}" onclick="flipCard(${i})">
      <div class="mem-card-inner">
        <div class="card-face card-back-face">
          <div class="back-emoji">${c.emoji}</div>
          <div class="card-logo">MEMORAMA</div>
        </div>
        <div class="card-face card-front-face type-${c.type}">
          <div class="card-emoji">${c.emoji}</div>
          <div class="card-type-label">${c.type==='en'?'ğŸ‡ºğŸ‡¸ English':'ğŸ‡²ğŸ‡½ EspaÃ±ol'}</div>
          <div class="card-text">${c.text}</div>
        </div>
      </div>
    </div>`).join('');
}

function updateScore(){
  const done = matched.size / 2;
  document.getElementById('scoreDisplay').textContent = done;
  document.getElementById('totalDisplay').textContent = 10;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FLIP LOGIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function flipCard(idx){
  if(locked) return;
  if(matched.has(idx)) return;
  if(flipped.includes(idx)) return;
  if(flipped.length >= 2) return;

  const el = document.querySelector(`.mem-card[data-idx="${idx}"]`);
  el.classList.add('flipped');
  flipped.push(idx);

  if(flipped.length === 2){
    locked = true;
    moves++;
    checkMatch();
  }
}

function checkMatch(){
  const [a, b] = flipped;
  const ca = cardData[a], cb = cardData[b];

  if(ca.id === cb.id && ca.type !== cb.type){
    // MATCH!
    setTimeout(()=>{
      document.querySelector(`.mem-card[data-idx="${a}"]`).classList.add('matched');
      document.querySelector(`.mem-card[data-idx="${b}"]`).classList.add('matched');
      matched.add(a); matched.add(b);
      flipped = [];
      locked = false;
      updateScore();
      renderZoneHeader();
      pendingMatchData = ca.item;
      showMatchModal(ca.item);
    }, 600);
  } else {
    // No match
    setTimeout(()=>{
      document.querySelector(`.mem-card[data-idx="${a}"]`).classList.remove('flipped');
      document.querySelector(`.mem-card[data-idx="${b}"]`).classList.remove('flipped');
      flipped=[];
      locked=false;
    }, 900);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MATCH MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showMatchModal(item){
  const z = ZONES[currentZoneIdx];
  document.getElementById('modalEmoji').textContent = item.emoji;
  document.getElementById('modalIdiom').textContent = `"${item.en}"`;
  document.getElementById('modalTranslation').textContent = `âœ ${item.es}`;
  document.getElementById('modalExample').style.borderColor = z.color;
  document.getElementById('modalExample').innerHTML =
    `<strong style="color:${z.color}">Example:</strong><br>"${item.ex}"`;
  document.getElementById('matchModal').classList.add('show');
}

function closeMatchModal(){
  document.getElementById('matchModal').classList.remove('show');
  // check zone complete
  if(matched.size === 20){
    setTimeout(showZoneComplete, 300);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ZONE COMPLETE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showZoneComplete(){
  const z = ZONES[currentZoneIdx];
  document.getElementById('zcTitle').textContent = `Â¡${z.label} completada! ${z.icon}`;
  document.getElementById('zcMsg').textContent =
    `Â¡Encontraste todos los pares en ${moves} intentos! Â¿Quieres continuar con la siguiente zona?`;
  document.getElementById('zoneComplete').classList.add('show');
}

function closeZoneComplete(){
  document.getElementById('zoneComplete').classList.remove('show');
}

function nextZoneAuto(){
  document.getElementById('zoneComplete').classList.remove('show');
  switchZone((currentZoneIdx + 1) % ZONES.length);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONTROLS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function shuffleAndRender(){
  renderGrid();
}
function resetZone(){
  renderGrid();
}
function changeRound(){
  currentRound = parseInt(document.getElementById('roundSelect').value);
  renderGrid();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
buildZoneTabs();
renderZoneHeader();
renderGrid();
</script>
</body>
</html>